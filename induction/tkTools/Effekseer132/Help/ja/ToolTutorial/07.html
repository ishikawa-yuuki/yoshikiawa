<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>No07. 親子関係で複雑な動きしよう！</title>
  <style type="text/css">code{white-space: pre;}</style>
  <link rel="stylesheet" href="../base.css">
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">No07. 親子関係で複雑な動きしよう！</h1>
</header>
<div class="main">
<h2>概要</h2>
<p>本章では、ノードの親子関係を用いて複雑なエフェクトを作成します。 若干、本章は難しいです。しっかり理解しましょう。</p>
<div align="center">
<table>
<tr>
<td>
<div align="center">
<img src="../../img/Tutorial/07_effect1.gif">
<p>
本章で作成するエフェクト1
</p>
</div>
</td>
<td>
<div align="center">
<img src="../../img/Tutorial/07_effect2.gif">
<p>
本章で作成するエフェクト2
</p>
</div>
</td>
</tr>
</table>
</div>
<h2>親子関係</h2>
<p>Effekseerでは、ノードが親子関係を持ちます。 親子関係があると、親のノードが子のノードに様々な影響を与えれます。</p>
<p>例えば、ノードAとノードBがあるとします。ノードAはノードBの親です。 この時、ノードBから生成されるパーティクルはノードAのパーティクルを中心に、生成、移動、回転、拡大します。 言葉ではわかりにくいので映像を表示します。</p>
<p>ノードAのパーティクルは赤色、ノードBのパーティクルは緑色です。 移動・回転しているパーティクルAを中心にパーティクルBが回転していることがわかります。</p>
<div align="center">
<img src="../../img/Tutorial/07_parent.gif">
<p>
親子関係
</p>
</div>
<p>親子関係を利用することで、複雑なエフェクトを作成できます。 例えば、親のパーティクルから子のパーティクルを発するエフェクトです。 サンプルでは親の細長いパーティクルは移動しつつ、親のパーティクルの先端から子の雪のパーティクルを大量に生成します。</p>
<div align="center">
<img src="../../img/Tutorial/07_sample.gif">
<p>
サンプル
</p>
</div>
<p>
あらかじめ作成途中のエフェクトを下記のリンクからダウンロードできるようにしました。
</p>
<div align="center">
<p>
<a href = "../../Sample/07_01_Sample.zip">ダウンロード</a>
</p>
</div>
<h2>竜巻エフェクト</h2>
<p>親子関係を利用して、竜巻エフェクトを作成します。</p>
<p>effect1.efkprojを開いてください。</p>
<p>このエフェクトは、親の回転を制御するパーティクルと画像を描画する子のパーティクルで構成されています。 親ノード、子ノードの順番で作成します。</p>
<h3>親ノード</h3>
<p>親ノードは回転するのみです。パラメーターも設定済みです。</p>
<div align="center">
<img src="../../img/Tutorial/07_effect1_rotate1.gif">
<p>
回転
</p>
</div>
<h3>子ノード</h3>
<p>子ノードを追加します。 親ノードを左クリックして選択します。 そして、右クリックして、メニュー表示します。 メニューから、ノードの追加を選択します。</p>
<div align="center">
<img src="../../img/Tutorial/07_addnode_ja.png">
<p>
ノードの追加
</p>
</div>
<p>追加されたノードを左クリックして選択します。 子のノードには、パーティクルが上方向に移動するようにパラメーターを入力します。</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">ウインドウ</th>
<th style="text-align: left;">値の名称</th>
<th style="text-align: left;">値</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">位置</td>
<td style="text-align: left;">位置方法</td>
<td style="text-align: left;">位置・速度・加速度</td>
</tr>
<tr class="even">
<td style="text-align: left;">位置</td>
<td style="text-align: left;">位置(中心)</td>
<td style="text-align: left;">x=2, y=0, z= 0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">位置</td>
<td style="text-align: left;">速度(中心)</td>
<td style="text-align: left;">x=0, y=0.5, z= 0</td>
</tr>
</tbody>
</table>
<p>子のパーティクルが親のパーティクルの回転に合わせて動いていることがわかります。</p>
<div align="center">
<img src="../../img/Tutorial/07_effect1_rotate2.gif">
<p>
回転
</p>
</div>
<p>さらに、見栄えをよくするために下記のパラメーターを入力します。</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">ウインドウ</th>
<th style="text-align: left;">値の名称</th>
<th style="text-align: left;">値</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">共通</td>
<td style="text-align: left;">名称</td>
<td style="text-align: left;">Child</td>
</tr>
<tr class="even">
<td style="text-align: left;">共通</td>
<td style="text-align: left;">生成数</td>
<td style="text-align: left;">無限</td>
</tr>
<tr class="odd">
<td style="text-align: left;">位置</td>
<td style="text-align: left;">位置(中心)</td>
<td style="text-align: left;">x=0, y=0, z= 0</td>
</tr>
<tr class="even">
<td style="text-align: left;">位置</td>
<td style="text-align: left;">位置(振幅)</td>
<td style="text-align: left;">x=3, y=3, z= 3</td>
</tr>
<tr class="odd">
<td style="text-align: left;">描画共通</td>
<td style="text-align: left;">色/歪み画像</td>
<td style="text-align: left;">Partcle1.png</td>
</tr>
<tr class="even">
<td style="text-align: left;">描画共通</td>
<td style="text-align: left;">ブレンド</td>
<td style="text-align: left;">加算</td>
</tr>
<tr class="odd">
<td style="text-align: left;">描画</td>
<td style="text-align: left;">全体色</td>
<td style="text-align: left;">ランダム</td>
</tr>
<tr class="even">
<td style="text-align: left;">描画</td>
<td style="text-align: left;">全体色(中心)</td>
<td style="text-align: left;">255,191,192,255</td>
</tr>
<tr class="odd">
<td style="text-align: left;">描画</td>
<td style="text-align: left;">全体色(振幅)</td>
<td style="text-align: left;">0,64,64,0</td>
</tr>
</tbody>
</table>
<p>エフェクトの見栄えが良くなりました。</p>
<div align="center">
<img src="../../img/Tutorial/07_effect1.gif">
<p>
完成
</p>
</div>
<h2>流星エフェクト</h2>
<p>親子関係を利用して流星エフェクトを作成します。</p>
<p>effect2.efkprojを開いてください。</p>
<p>Effekseerでは、子のパーティクルが生成された瞬間に親子関係を切ることができます。 どういうことかというと、子のパーティクルが生成された時の親の姿勢を中心に子のパーティクルが生成されます。 それ以降、親のパーティクルが移動したり、回転したりしても、子に影響与えることはありません。</p>
<p>この機能を利用して流星エフェクトを作成します。</p>
<h3>親ノード</h3>
<p>親ノードは移動するのみです。 パラメーターは設定済みです。</p>
<h3>子ノード</h3>
<p>パーティクルを周囲にばらまきます。パラメーターは設定済みです。</p>
<p>ただ、位置への影響、角度への影響、拡大への影響のパラメーターが「常時」になってます。 「常時」だと、子のパーティクルが生成された後も、子のパーティクルは親のパーティクルの影響を受け続けます。 つまり、親の移動に合わせて子も移動しています。</p>
<div align="center">
<img src="../../img/Tutorial/07_effect2_always.gif">
<p>
常時
</p>
</div>
<p>「共通」ウインドウから、位置への影響、角度への影響、拡大への影響のパラメーターが「生成時のみ」に変更します。 そうすると、親のパーティクルが移動しても子のパーティクルは親に合わせて移動しないことがわかります。</p>
<div align="center">
<img src="../../img/Tutorial/07_effect2.gif">
<p>
生成時のみ
</p>
</div>
<p>最後に、本章で作成されたエフェクトをダウンロードできるようにしてみました。</p>
<div align="center">
<p><a href = "../../Sample/07_02_Sample.zip">ダウンロード</a></p>
</div>
<h2>まとめ</h2>
<p>本章では、親子関係を使用して複雑なエフェクトを作成しました。 次章では、生成方法を変更して、パーティクルを円形や直線状に配置したりします。</p>
</div>
</body>
</html>
